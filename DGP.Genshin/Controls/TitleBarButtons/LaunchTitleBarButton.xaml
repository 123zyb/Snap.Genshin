<ui:TitleBarButton xmlns:ui="http://schemas.modernwpf.com/2019"
                   x:Class="DGP.Genshin.Controls.TitleBarButtons.LaunchTitleBarButton"
                   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                   xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                   xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                   xmlns:local="clr-namespace:DGP.Genshin.Controls.TitleBarButtons"
                   mc:Ignorable="d" 
                   IsActive="{Binding IsActive,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType=Window}}" 
                   Width="NaN" Padding="16,0" FontFamily="Microsoft YaHei UI" 
                   Content="启动游戏"
                   Click="LaunchTitleBarButtonClick">
    <ui:FlyoutBase.AttachedFlyout>
        <ui:Flyout Placement="Bottom" Closed="Flyout_Closed">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <ui:ListView Grid.Row="0" ItemsSource="{Binding Accounts}" SelectedItem="{Binding SelectedAccount}" DisplayMemberPath="Name"/>
                <StackPanel Grid.Row="1">
                    <ComboBox ui:ControlHelper.PlaceholderText="选择启动方案"
                          HorizontalAlignment="Stretch" 
                          ItemsSource="{Binding KnownSchemes}"
                          SelectedItem="{Binding CurrentScheme}"
                          DisplayMemberPath="Name"/>
                    <Button IsDefault="True" Height="32" Margin="0,12,0,0" HorizontalAlignment="Stretch"
                        Content="启动游戏" Click="LaunchButtonClick"/>
                    <ui:ToggleSwitch OffContent="独占全屏" OnContent="窗口化" Margin="0,8,0,0" IsOn="{Binding IsBorderless}"/>
                </StackPanel>
            </Grid>
        </ui:Flyout>
    </ui:FlyoutBase.AttachedFlyout>
</ui:TitleBarButton>
