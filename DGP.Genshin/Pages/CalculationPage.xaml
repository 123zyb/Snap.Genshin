<Page x:Class="DGP.Genshin.Pages.CalculationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:DGP.Genshin.Pages" 
      xmlns:ui="http://schemas.modernwpf.com/2019" 
      xmlns:controls="clr-namespace:DGP.Genshin.Controls" 
      xmlns:converters="clr-namespace:DGP.Genshin.Controls.Converters" 
      xmlns:system="clr-namespace:System;assembly=mscorlib"
      xmlns:helpers="clr-namespace:DGP.Genshin.Helpers"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="CalculationPage"
      Loaded="Page_Loaded">
    <Page.Resources>
        <converters:StatValueConverter x:Key="StatValueConverter"/>
        <converters:StatToStringConverter x:Key="StatToStringConverter"/>
        <system:String x:Key="ConditionNullValue">满足额外条件</system:String>
        <Style x:Key="CharacterPersonPictureStyle" TargetType="{x:Type ui:PersonPicture}">
            <Setter Property="Foreground" Value="{DynamicResource PersonPictureForegroundThemeBrush}"/>
            <Setter Property="Width" Value="24"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="FontFamily" Value="{DynamicResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontWeight" Value="350"/>
            <Setter Property="IsTabStop" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ui:PersonPicture}">
                        <ControlTemplate.Resources>
                            <StreamGeometry x:Key="Contact">M12.988281,11.748047C13.873697,12.054037 14.672852,12.482097 15.385742,13.032227 16.098633,13.582357 16.704102,14.21875 17.202148,14.941406 17.700195,15.664063 18.082682,16.455078 18.349609,17.314453 18.616535,18.173828 18.75,19.06901 18.75,20L17.5,20C17.5,18.932291 17.30957,17.94108 16.928711,17.026367 16.547852,16.111654 16.022135,15.319011 15.351563,14.648438 14.680989,13.977865 13.888346,13.452148 12.973633,13.071289 12.058919,12.69043 11.067708,12.5 10,12.5 9.303385,12.5 8.632813,12.587891 7.988281,12.763672 7.34375,12.939453 6.743164,13.188477 6.186523,13.510742 5.629883,13.833008 5.125325,14.220378 4.672852,14.672852 4.220377,15.125326 3.833008,15.629883 3.510742,16.186523 3.188477,16.743164 2.939453,17.34375 2.763672,17.988281 2.587891,18.632813 2.5,19.303385 2.5,20L1.25,20C1.25,19.0625 1.386719,18.165689 1.660156,17.30957 1.933594,16.453451 2.320963,15.667318 2.822266,14.951172 3.323567,14.235026 3.930664,13.603516 4.643555,13.056641 5.356445,12.509766 6.152344,12.076823 7.03125,11.757813 6.523437,11.484375 6.067708,11.152344 5.664063,10.761719 5.260417,10.371094 4.916992,9.936523 4.633789,9.458008 4.350586,8.979492 4.132487,8.468425 3.979492,7.924805 3.826497,7.381186 3.75,6.822918 3.75,6.25 3.75,5.384115 3.91276,4.57194 4.238281,3.813477 4.563802,3.055014 5.009766,2.392578 5.576172,1.826172 6.142578,1.259766 6.805013,0.813803 7.563477,0.488281 8.321939,0.162762 9.134114,0 10,0 10.865885,0 11.67806,0.162762 12.436523,0.488281 13.194986,0.813803 13.857422,1.259766 14.423828,1.826172 14.990234,2.392578 15.436197,3.055014 15.761719,3.813477 16.087238,4.57194 16.25,5.384115 16.25,6.25 16.25,6.822918 16.173502,7.379559 16.020508,7.919922 15.867512,8.460287 15.649413,8.9681 15.366211,9.443359 15.083007,9.91862 14.74121,10.35319 14.34082,10.74707 13.940429,11.140951 13.489582,11.474609 12.988281,11.748047z M5,6.25C5,6.940105 5.131836,7.587892 5.395508,8.193359 5.65918,8.798828 6.017252,9.3278 6.469727,9.780273 6.9222,10.232748 7.451171,10.59082 8.056641,10.854492 8.662109,11.118164 9.309896,11.25 10,11.25 10.690104,11.25 11.337891,11.118164 11.943359,10.854492 12.548828,10.59082 13.077799,10.232748 13.530273,9.780273 13.982746,9.3278 14.340819,8.798828 14.604492,8.193359 14.868163,7.587892 15,6.940105 15,6.25 15,5.559896 14.868163,4.912109 14.604492,4.306641 14.340819,3.701172 13.982746,3.172201 13.530273,2.719727 13.077799,2.267254 12.548828,1.90918 11.943359,1.645508 11.337891,1.381836 10.690104,1.25 10,1.25 9.309896,1.25 8.662109,1.381836 8.056641,1.645508 7.451171,1.90918 6.9222,2.267254 6.469727,2.719727 6.017252,3.172201 5.65918,3.701172 5.395508,4.306641 5.131836,4.912109 5,5.559896 5,6.25z</StreamGeometry>
                            <StreamGeometry x:Key="People">F1M12.988281,11.748047C13.873697,12.054037 14.672852,12.482097 15.385742,13.032227 16.098633,13.582357 16.704102,14.21875 17.202148,14.941406 17.700195,15.664063 18.082682,16.455078 18.349609,17.314453 18.616535,18.173828 18.75,19.06901 18.75,20L17.5,20C17.5,18.932291 17.30957,17.94108 16.928711,17.026367 16.547852,16.111654 16.022135,15.319011 15.351563,14.648438 14.680989,13.977865 13.888346,13.452148 12.973633,13.071289 12.058919,12.69043 11.067708,12.5 10,12.5 9.303385,12.5 8.632813,12.587891 7.988281,12.763672 7.34375,12.939453 6.743164,13.188477 6.186523,13.510742 5.629883,13.833008 5.125325,14.220378 4.672852,14.672852 4.220377,15.125326 3.833008,15.629883 3.510742,16.186523 3.188477,16.743164 2.939453,17.34375 2.763672,17.988281 2.587891,18.632813 2.5,19.303385 2.5,20L1.25,20C1.25,19.0625 1.386719,18.165689 1.660156,17.30957 1.933594,16.453451 2.320963,15.667318 2.822266,14.951172 3.323567,14.235026 3.930664,13.603516 4.643555,13.056641 5.356445,12.509766 6.152344,12.076823 7.03125,11.757813 6.523437,11.484375 6.067708,11.152344 5.664063,10.761719 5.260417,10.371094 4.916992,9.936523 4.633789,9.458008 4.350586,8.979492 4.132487,8.468425 3.979492,7.924805 3.826497,7.381186 3.75,6.822918 3.75,6.25 3.75,5.384115 3.91276,4.57194 4.238281,3.813477 4.563802,3.055014 5.009766,2.392578 5.576172,1.826172 6.142578,1.259766 6.805013,0.813803 7.563477,0.488281 8.321939,0.162762 9.134114,0 10,0 10.865885,0 11.67806,0.162762 12.436523,0.488281 13.194986,0.813803 13.857422,1.259766 14.423828,1.826172 14.990234,2.392578 15.436197,3.055014 15.761719,3.813477 16.087238,4.57194 16.25,5.384115 16.25,6.25 16.25,6.822918 16.173502,7.379559 16.020508,7.919922 15.867512,8.460287 15.649413,8.9681 15.366211,9.443359 15.083007,9.91862 14.74121,10.35319 14.34082,10.74707 13.940429,11.140951 13.489582,11.474609 12.988281,11.748047z M5,6.25C5,6.940105 5.131836,7.587892 5.395508,8.193359 5.65918,8.798828 6.017252,9.3278 6.469727,9.780273 6.9222,10.232748 7.451171,10.59082 8.056641,10.854492 8.662109,11.118164 9.309896,11.25 10,11.25 10.690104,11.25 11.337891,11.118164 11.943359,10.854492 12.548828,10.59082 13.077799,10.232748 13.530273,9.780273 13.982746,9.3278 14.340819,8.798828 14.604492,8.193359 14.868163,7.587892 15,6.940105 15,6.25 15,5.559896 14.868163,4.912109 14.604492,4.306641 14.340819,3.701172 13.982746,3.172201 13.530273,2.719727 13.077799,2.267254 12.548828,1.90918 11.943359,1.645508 11.337891,1.381836 10.690104,1.25 10,1.25 9.309896,1.25 8.662109,1.381836 8.056641,1.645508 7.451171,1.90918 6.9222,2.267254 6.469727,2.719727 6.017252,3.172201 5.65918,3.701172 5.395508,4.306641 5.131836,4.912109 5,5.559896 5,6.25z</StreamGeometry>
                        </ControlTemplate.Resources>
                        <Grid x:Name="RootGrid">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <ui:VisualStateGroupListener.Listener>
                                        <ui:VisualStateGroupListener x:Name="CommonStatesListener"/>
                                    </ui:VisualStateGroupListener.Listener>
                                    <VisualState x:Name="Photo"/>
                                    <VisualState x:Name="Initials"/>
                                    <VisualState x:Name="NoPhotoOrInitials"/>
                                    <VisualState x:Name="Group"/>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="BadgeStates">
                                    <ui:VisualStateGroupListener.Listener>
                                        <ui:VisualStateGroupListener x:Name="BadgeStatesListener"/>
                                    </ui:VisualStateGroupListener.Listener>
                                    <VisualState x:Name="NoBadge"/>
                                    <VisualState x:Name="BadgeWithoutImageSource"/>
                                    <VisualState x:Name="BadgeWithImageSource">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="BadgingEllipse">
                                                <DiscreteObjectKeyFrame KeyTime="0">
                                                    <DiscreteObjectKeyFrame.Value>
                                                        <ImageBrush Stretch="UniformToFill"/>
                                                    </DiscreteObjectKeyFrame.Value>
                                                </DiscreteObjectKeyFrame>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <!--here-->
                            <Ellipse Fill="#FFD19D78" Height="{TemplateBinding Height}" Stroke="#FFEFEBE0" StrokeThickness="2" Width="{TemplateBinding Width}"/>
                            <TextBlock x:Name="InitialsTextBlock" Foreground="{TemplateBinding Foreground}" FontWeight="{TemplateBinding FontWeight}" FontSize="36" FontFamily="{TemplateBinding FontFamily}" HorizontalAlignment="Center" Text="{Binding TemplateSettings.ActualInitials, RelativeSource={RelativeSource TemplatedParent}}" VerticalAlignment="Center">
                                <TextBlock.RenderTransform>
                                    <TranslateTransform Y="-2"/>
                                </TextBlock.RenderTransform>
                            </TextBlock>
                            <ui:FontIconFallback x:Name="PlaceholderIcon" Foreground="{TemplateBinding Foreground}" FontSize="{Binding FontSize, ElementName=InitialsTextBlock}" HorizontalAlignment="Center" Visibility="Collapsed" VerticalAlignment="Center">
                                <ui:FontIconFallback.RenderTransform>
                                    <TranslateTransform Y="-2"/>
                                </ui:FontIconFallback.RenderTransform>
                            </ui:FontIconFallback>
                            <Ellipse x:Name="PersonPictureEllipse" FlowDirection="LeftToRight" Height="22" Width="22"/>
                            <Grid x:Name="BadgeGrid" HorizontalAlignment="Right" Visibility="Collapsed" VerticalAlignment="Bottom">
                                <Ellipse x:Name="BadgingBackgroundEllipse" Fill="{DynamicResource PersonPictureEllipseBadgeFillThemeBrush}" Opacity="{DynamicResource PersonPictureEllipseBadgeStrokeOpacity}" Stroke="{DynamicResource PersonPictureEllipseBadgeStrokeThemeBrush}" StrokeThickness="{DynamicResource PersonPictureEllipseBadgeStrokeThickness}"/>
                                <Ellipse x:Name="BadgingEllipse" FlowDirection="LeftToRight" Opacity="0"/>
                                <TextBlock x:Name="BadgeNumberTextBlock" Foreground="{DynamicResource PersonPictureEllipseBadgeForegroundThemeBrush}" FontWeight="{TemplateBinding FontWeight}" FontFamily="{TemplateBinding FontFamily}" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <TextBlock.RenderTransform>
                                        <TranslateTransform Y="-1"/>
                                    </TextBlock.RenderTransform>
                                </TextBlock>
                                <ui:FontIcon x:Name="BadgeGlyphIcon" Foreground="{DynamicResource PersonPictureEllipseBadgeForegroundThemeBrush}" FontWeight="{TemplateBinding FontWeight}" FontFamily="{DynamicResource SymbolThemeFontFamily}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Grid>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="CurrentStateName" SourceName="CommonStatesListener" Value="Photo">
                                <Setter Property="Fill" TargetName="PersonPictureEllipse" Value="{Binding TemplateSettings.ActualImageBrush, RelativeSource={RelativeSource TemplatedParent}}"/>
                            </Trigger>
                            <Trigger Property="CurrentStateName" SourceName="CommonStatesListener" Value="NoPhotoOrInitials">
                                <Setter Property="Visibility" TargetName="InitialsTextBlock" Value="Collapsed"/>
                                <Setter Property="Data" TargetName="PlaceholderIcon" Value="M12.988281,11.748047C13.873697,12.054037 14.672852,12.482097 15.385742,13.032227 16.098633,13.582357 16.704102,14.21875 17.202148,14.941406 17.700195,15.664063 18.082682,16.455078 18.349609,17.314453 18.616535,18.173828 18.75,19.06901 18.75,20L17.5,20C17.5,18.932291 17.30957,17.94108 16.928711,17.026367 16.547852,16.111654 16.022135,15.319011 15.351563,14.648438 14.680989,13.977865 13.888346,13.452148 12.973633,13.071289 12.058919,12.69043 11.067708,12.5 10,12.5 9.303385,12.5 8.632813,12.587891 7.988281,12.763672 7.34375,12.939453 6.743164,13.188477 6.186523,13.510742 5.629883,13.833008 5.125325,14.220378 4.672852,14.672852 4.220377,15.125326 3.833008,15.629883 3.510742,16.186523 3.188477,16.743164 2.939453,17.34375 2.763672,17.988281 2.587891,18.632813 2.5,19.303385 2.5,20L1.25,20C1.25,19.0625 1.386719,18.165689 1.660156,17.30957 1.933594,16.453451 2.320963,15.667318 2.822266,14.951172 3.323567,14.235026 3.930664,13.603516 4.643555,13.056641 5.356445,12.509766 6.152344,12.076823 7.03125,11.757813 6.523437,11.484375 6.067708,11.152344 5.664063,10.761719 5.260417,10.371094 4.916992,9.936523 4.633789,9.458008 4.350586,8.979492 4.132487,8.468425 3.979492,7.924805 3.826497,7.381186 3.75,6.822918 3.75,6.25 3.75,5.384115 3.91276,4.57194 4.238281,3.813477 4.563802,3.055014 5.009766,2.392578 5.576172,1.826172 6.142578,1.259766 6.805013,0.813803 7.563477,0.488281 8.321939,0.162762 9.134114,0 10,0 10.865885,0 11.67806,0.162762 12.436523,0.488281 13.194986,0.813803 13.857422,1.259766 14.423828,1.826172 14.990234,2.392578 15.436197,3.055014 15.761719,3.813477 16.087238,4.57194 16.25,5.384115 16.25,6.25 16.25,6.822918 16.173502,7.379559 16.020508,7.919922 15.867512,8.460287 15.649413,8.9681 15.366211,9.443359 15.083007,9.91862 14.74121,10.35319 14.34082,10.74707 13.940429,11.140951 13.489582,11.474609 12.988281,11.748047z M5,6.25C5,6.940105 5.131836,7.587892 5.395508,8.193359 5.65918,8.798828 6.017252,9.3278 6.469727,9.780273 6.9222,10.232748 7.451171,10.59082 8.056641,10.854492 8.662109,11.118164 9.309896,11.25 10,11.25 10.690104,11.25 11.337891,11.118164 11.943359,10.854492 12.548828,10.59082 13.077799,10.232748 13.530273,9.780273 13.982746,9.3278 14.340819,8.798828 14.604492,8.193359 14.868163,7.587892 15,6.940105 15,6.25 15,5.559896 14.868163,4.912109 14.604492,4.306641 14.340819,3.701172 13.982746,3.172201 13.530273,2.719727 13.077799,2.267254 12.548828,1.90918 11.943359,1.645508 11.337891,1.381836 10.690104,1.25 10,1.25 9.309896,1.25 8.662109,1.381836 8.056641,1.645508 7.451171,1.90918 6.9222,2.267254 6.469727,2.719727 6.017252,3.172201 5.65918,3.701172 5.395508,4.306641 5.131836,4.912109 5,5.559896 5,6.25z"/>
                                <Setter Property="Visibility" TargetName="PlaceholderIcon" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="CurrentStateName" SourceName="CommonStatesListener" Value="Group">
                                <Setter Property="Visibility" TargetName="InitialsTextBlock" Value="Collapsed"/>
                                <Setter Property="Data" TargetName="PlaceholderIcon" Value="F1M12.988281,11.748047C13.873697,12.054037 14.672852,12.482097 15.385742,13.032227 16.098633,13.582357 16.704102,14.21875 17.202148,14.941406 17.700195,15.664063 18.082682,16.455078 18.349609,17.314453 18.616535,18.173828 18.75,19.06901 18.75,20L17.5,20C17.5,18.932291 17.30957,17.94108 16.928711,17.026367 16.547852,16.111654 16.022135,15.319011 15.351563,14.648438 14.680989,13.977865 13.888346,13.452148 12.973633,13.071289 12.058919,12.69043 11.067708,12.5 10,12.5 9.303385,12.5 8.632813,12.587891 7.988281,12.763672 7.34375,12.939453 6.743164,13.188477 6.186523,13.510742 5.629883,13.833008 5.125325,14.220378 4.672852,14.672852 4.220377,15.125326 3.833008,15.629883 3.510742,16.186523 3.188477,16.743164 2.939453,17.34375 2.763672,17.988281 2.587891,18.632813 2.5,19.303385 2.5,20L1.25,20C1.25,19.0625 1.386719,18.165689 1.660156,17.30957 1.933594,16.453451 2.320963,15.667318 2.822266,14.951172 3.323567,14.235026 3.930664,13.603516 4.643555,13.056641 5.356445,12.509766 6.152344,12.076823 7.03125,11.757813 6.523437,11.484375 6.067708,11.152344 5.664063,10.761719 5.260417,10.371094 4.916992,9.936523 4.633789,9.458008 4.350586,8.979492 4.132487,8.468425 3.979492,7.924805 3.826497,7.381186 3.75,6.822918 3.75,6.25 3.75,5.384115 3.91276,4.57194 4.238281,3.813477 4.563802,3.055014 5.009766,2.392578 5.576172,1.826172 6.142578,1.259766 6.805013,0.813803 7.563477,0.488281 8.321939,0.162762 9.134114,0 10,0 10.865885,0 11.67806,0.162762 12.436523,0.488281 13.194986,0.813803 13.857422,1.259766 14.423828,1.826172 14.990234,2.392578 15.436197,3.055014 15.761719,3.813477 16.087238,4.57194 16.25,5.384115 16.25,6.25 16.25,6.822918 16.173502,7.379559 16.020508,7.919922 15.867512,8.460287 15.649413,8.9681 15.366211,9.443359 15.083007,9.91862 14.74121,10.35319 14.34082,10.74707 13.940429,11.140951 13.489582,11.474609 12.988281,11.748047z M5,6.25C5,6.940105 5.131836,7.587892 5.395508,8.193359 5.65918,8.798828 6.017252,9.3278 6.469727,9.780273 6.9222,10.232748 7.451171,10.59082 8.056641,10.854492 8.662109,11.118164 9.309896,11.25 10,11.25 10.690104,11.25 11.337891,11.118164 11.943359,10.854492 12.548828,10.59082 13.077799,10.232748 13.530273,9.780273 13.982746,9.3278 14.340819,8.798828 14.604492,8.193359 14.868163,7.587892 15,6.940105 15,6.25 15,5.559896 14.868163,4.912109 14.604492,4.306641 14.340819,3.701172 13.982746,3.172201 13.530273,2.719727 13.077799,2.267254 12.548828,1.90918 11.943359,1.645508 11.337891,1.381836 10.690104,1.25 10,1.25 9.309896,1.25 8.662109,1.381836 8.056641,1.645508 7.451171,1.90918 6.9222,2.267254 6.469727,2.719727 6.017252,3.172201 5.65918,3.701172 5.395508,4.306641 5.131836,4.912109 5,5.559896 5,6.25z"/>
                                <Setter Property="Visibility" TargetName="PlaceholderIcon" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="CurrentStateName" SourceName="BadgeStatesListener" Value="BadgeWithoutImageSource">
                                <Setter Property="Visibility" TargetName="BadgeGrid" Value="Visible"/>
                            </Trigger>
                            <Trigger Property="CurrentStateName" SourceName="BadgeStatesListener" Value="BadgeWithImageSource">
                                <Setter Property="Visibility" TargetName="BadgeGrid" Value="Visible"/>
                                <Setter Property="Opacity" TargetName="BadgingEllipse" Value="{DynamicResource PersonPictureEllipseBadgeImageSourceStrokeOpacity}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="PassiveCheckBoxStyle" TargetType="{x:Type CheckBox}">
            <Setter Property="OverridesDefaultStyle" Value="True"/>
            <Setter Property="Background" Value="{DynamicResource CheckBoxBackgroundUnchecked}"/>
            <Setter Property="Foreground" Value="{DynamicResource CheckBoxForegroundUnchecked}"/>
            <Setter Property="BorderBrush" Value="{DynamicResource CheckBoxBorderBrushUnchecked}"/>
            <Setter Property="Padding" Value="8,0,0,0"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="FontFamily" Value="{DynamicResource ContentControlThemeFontFamily}"/>
            <Setter Property="FontSize" Value="{DynamicResource ControlContentThemeFontSize}"/>
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="MinHeight" Value="32"/>
            <Setter Property="FocusVisualStyle" Value="{DynamicResource {x:Static SystemParameters.FocusVisualStyleKey}}"/>
            <Setter Property="ui:FocusVisualHelper.UseSystemFocusVisuals" Value="{DynamicResource UseSystemFocusVisuals}"/>
            <Setter Property="ui:FocusVisualHelper.FocusVisualMargin" Value="-7,-3"/>
            <Setter Property="ui:ControlHelper.CornerRadius" Value="{DynamicResource ControlCornerRadius}"/>
            <Setter Property="Stylus.IsPressAndHoldEnabled" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type CheckBox}">
                        <ControlTemplate.Resources>
                            <StreamGeometry x:Key="CheckboxIndeterminate">M15,5L15,15 5,15 5,5z</StreamGeometry>
                            <StreamGeometry x:Key="CheckMark">M17.939453,5.439453L7.5,15.888672 2.060547,10.439453 2.939453,9.560547 7.5,14.111328 17.060547,4.560547z</StreamGeometry>
                        </ControlTemplate.Resources>
                        <Border x:Name="RootGrid" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="{TemplateBinding ui:ControlHelper.CornerRadius}" SnapsToDevicePixels="True">
                            <Grid VerticalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid VerticalAlignment="Top">
                                    <Rectangle x:Name="NormalRectangle" Fill="{DynamicResource CheckBoxCheckBackgroundFillUnchecked}" Height="20" Stroke="{DynamicResource CheckBoxCheckBackgroundStrokeUnchecked}" StrokeThickness="{DynamicResource CheckBoxBorderThemeThickness}" UseLayoutRounding="False" Width="20">
                                        <Rectangle.RadiusY>
                                            <TemplateBinding Property="ui:ControlHelper.CornerRadius">
                                                <TemplateBinding.Converter>
                                                    <ui:CornerRadiusFilterConverter Filter="BottomRightValue" Scale="1"/>
                                                </TemplateBinding.Converter>
                                            </TemplateBinding>
                                        </Rectangle.RadiusY>
                                        <Rectangle.RadiusX>
                                            <TemplateBinding Property="ui:ControlHelper.CornerRadius">
                                                <TemplateBinding.Converter>
                                                    <ui:CornerRadiusFilterConverter Filter="TopLeftValue" Scale="1"/>
                                                </TemplateBinding.Converter>
                                            </TemplateBinding>
                                        </Rectangle.RadiusX>
                                    </Rectangle>
                                    <ui:FontIconFallback x:Name="CheckGlyph" Data="M17.939453,5.439453L7.5,15.888672 2.060547,10.439453 2.939453,9.560547 7.5,14.111328 17.060547,4.560547z" Foreground="{DynamicResource CheckBoxCheckGlyphForegroundUnchecked}" FontSize="16" FontFamily="{DynamicResource SymbolThemeFontFamily}" Opacity="0"/>
                                </Grid>
                                <ui:ContentPresenterEx x:Name="ContentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Column="1" ContentStringFormat="{TemplateBinding ContentStringFormat}" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" TextWrapping="Wrap" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="False"/>
                                    <Condition Property="IsMouseOver" Value="False"/>
                                    <Condition Property="IsPressed" Value="False"/>
                                    <Condition Property="IsEnabled" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundUnchecked}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundUnchecked}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushUnchecked}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeUnchecked}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillUnchecked}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundUnchecked}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="False"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundUncheckedPointerOver}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundUncheckedPointerOver}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushUncheckedPointerOver}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeUncheckedPointerOver}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillUncheckedPointerOver}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundUncheckedPointerOver}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="False"/>
                                    <Condition Property="IsPressed" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundUncheckedPressed}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundUncheckedPressed}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushUncheckedPressed}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeUncheckedPressed}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillUncheckedPressed}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundUncheckedPressed}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="False"/>
                                    <Condition Property="IsEnabled" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundUncheckedDisabled}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundUncheckedDisabled}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushUncheckedDisabled}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeUncheckedDisabled}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillUncheckedDisabled}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundUncheckedDisabled}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="True"/>
                                    <Condition Property="IsMouseOver" Value="False"/>
                                    <Condition Property="IsPressed" Value="False"/>
                                    <Condition Property="IsEnabled" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundChecked}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundChecked}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushChecked}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeChecked}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillChecked}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundChecked}"/>
                                <Setter Property="StrokeThickness" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckedStrokeThickness}"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="True"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundCheckedPointerOver}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundCheckedPointerOver}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushCheckedPointerOver}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeCheckedPointerOver}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillCheckedPointerOver}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundCheckedPointerOver}"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="True"/>
                                    <Condition Property="IsPressed" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundCheckedPressed}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundCheckedPressed}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushCheckedPressed}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeCheckedPressed}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillCheckedPressed}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundCheckedPressed}"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="True"/>
                                    <Condition Property="IsEnabled" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundCheckedDisabled}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundCheckedDisabled}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushCheckedDisabled}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeCheckedDisabled}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillCheckedDisabled}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundCheckedDisabled}"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="{x:Null}"/>
                                    <Condition Property="IsMouseOver" Value="False"/>
                                    <Condition Property="IsPressed" Value="False"/>
                                    <Condition Property="IsEnabled" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundIndeterminate}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundIndeterminate}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushIndeterminate}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeIndeterminate}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillIndeterminate}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundIndeterminate}"/>
                                <Setter Property="Data" TargetName="CheckGlyph" Value="M15,5L15,15 5,15 5,5z"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="{x:Null}"/>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundIndeterminatePointerOver}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundIndeterminatePointerOver}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushIndeterminatePointerOver}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeIndeterminatePointerOver}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillIndeterminatePointerOver}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundIndeterminatePointerOver}"/>
                                <Setter Property="Data" TargetName="CheckGlyph" Value="M15,5L15,15 5,15 5,5z"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="{x:Null}"/>
                                    <Condition Property="IsPressed" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundIndeterminatePressed}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundIndeterminatePressed}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushIndeterminatePressed}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeIndeterminatePressed}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillIndeterminatePressed}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundIndeterminatePressed}"/>
                                <Setter Property="Data" TargetName="CheckGlyph" Value="M15,5L15,15 5,15 5,5z"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsChecked" Value="{x:Null}"/>
                                    <Condition Property="IsEnabled" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Foreground" TargetName="ContentPresenter" Value="{DynamicResource CheckBoxForegroundIndeterminateDisabled}"/>
                                <Setter Property="Background" TargetName="RootGrid" Value="{DynamicResource CheckBoxBackgroundIndeterminateDisabled}"/>
                                <Setter Property="BorderBrush" TargetName="RootGrid" Value="{DynamicResource CheckBoxBorderBrushIndeterminateDisabled}"/>
                                <Setter Property="Stroke" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundStrokeIndeterminateDisabled}"/>
                                <Setter Property="Fill" TargetName="NormalRectangle" Value="{DynamicResource CheckBoxCheckBackgroundFillIndeterminateDisabled}"/>
                                <Setter Property="Foreground" TargetName="CheckGlyph" Value="{DynamicResource CheckBoxCheckGlyphForegroundIndeterminateDisabled}"/>
                                <Setter Property="Data" TargetName="CheckGlyph" Value="M15,5L15,15 5,15 5,5z"/>
                                <Setter Property="Opacity" TargetName="CheckGlyph" Value="1"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="356"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="44"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="auto"/>
            </Grid.RowDefinitions>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="16,0,0,0">
                <ComboBox MinWidth="160" Margin="0" VerticalAlignment="Center" ItemsSource="{Binding Characters}" SelectedItem="{Binding SelectedChar,Mode=TwoWay}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <Grid HorizontalAlignment="Stretch">
                                <ui:PersonPicture HorizontalAlignment="Left" Width="48" ProfilePicture="{Binding ImageUri}" Style="{DynamicResource CharacterPersonPictureStyle}"/>
                                <TextBlock Margin="32,0,0,0" Text="{Binding CharacterName}" VerticalAlignment="Center" Style="{StaticResource BodyTextBlockStyle}"/>
                            </Grid>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <ComboBox MinWidth="160" Margin="4,0,0,0" VerticalAlignment="Center" ItemsSource="{Binding Weapons}" SelectedItem="{Binding SelectedWeapon,Mode=TwoWay}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <Grid HorizontalAlignment="Stretch">
                                <ui:PersonPicture HorizontalAlignment="Left" Width="48" ProfilePicture="{Binding ImageUri}" Style="{DynamicResource CharacterPersonPictureStyle}"/>
                                <TextBlock Margin="32,0,0,0" Text="{Binding WeaponName}" VerticalAlignment="Center" Style="{StaticResource BodyTextBlockStyle}"/>
                            </Grid>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>
            <Grid Grid.Row="1">
                <ui:ScrollViewerEx>
                    <StackPanel Grid.Column="2">
                        <ui:ThemeShadowChrome Margin="16,16,16,0">
                            <Expander Padding="8" Background="{DynamicResource SystemControlBackgroundChromeMediumLowBrush}">
                                <Expander.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="80"/>
                                        </Grid.ColumnDefinitions>
                                        <controls:CharacterIcon Character="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type local:CalculationPage}},Path=SelectedChar}" HorizontalAlignment="Left"/>
                                        <TextBlock Grid.Column="1" Text="{Binding SelectedChar.AscensionStat,Converter={StaticResource StatToStringConverter}}" VerticalAlignment="Top" Margin="16,8,0,0" Style="{StaticResource BaseTextBlockStyle}"/>
                                        <TextBlock Grid.Column="1" Text="{Binding SelectedChar.AscensionStatValue,Converter={StaticResource StatValueConverter}}" VerticalAlignment="Bottom" Margin="16,0,0,14" Style="{StaticResource BodyTextBlockStyle}"/>
                                        <TextBox Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" ui:ControlHelper.Header="技能倍率" Width="80"/>
                                    </Grid>
                                </Expander.Header>
                                <ui:ListView IsSelectionEnabled="False" Padding="0" ItemContainerStyle="{StaticResource DefaultListBoxItemStyle}">
                                    <Grid>
                                        <TextBlock Text="sakfhsdfkj" VerticalAlignment="Center" Style="{StaticResource BodyTextBlockStyle}"/>
                                        <ui:ToggleSwitch HorizontalAlignment="Right" Width="80" Margin="0"/>
                                    </Grid>
                                    <Grid>
                                        <TextBlock Text="sakfhsdfkj" VerticalAlignment="Center" Style="{StaticResource BodyTextBlockStyle}"/>
                                        <ui:ToggleSwitch HorizontalAlignment="Right" Width="80" Margin="0"/>
                                    </Grid>
                                </ui:ListView>
                            </Expander>
                        </ui:ThemeShadowChrome>
                        <ui:ThemeShadowChrome Margin="16,16,16,0">
                            <Expander Padding="8" Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
                                <Expander.Header>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="70"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="80"/>
                                        </Grid.ColumnDefinitions>
                                        <controls:WeaponIcon Weapon="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType={x:Type local:CalculationPage}},Path=SelectedWeapon}" HorizontalAlignment="Left"/>
                                        <TextBlock Grid.Column="1" Text="{Binding SelectedWeapon.SubStat,Converter={StaticResource StatToStringConverter}}" VerticalAlignment="Top" Margin="16,8,0,0" Style="{StaticResource BaseTextBlockStyle}"/>
                                        <TextBlock Grid.Column="1" Text="{Binding SelectedWeapon.SubStatValue,Converter={StaticResource StatValueConverter}}" VerticalAlignment="Bottom" Margin="16,0,0,14" Style="{StaticResource BodyTextBlockStyle}"/>
                                        <ComboBox Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" ui:ControlHelper.Header="精炼阶数" Width="80" SelectedIndex="{Binding SelectedWeapon.RefineLevel,Mode=TwoWay}">
                                            <ComboBoxItem IsEnabled="False">-</ComboBoxItem>
                                            <ComboBoxItem>1</ComboBoxItem>
                                            <ComboBoxItem>2</ComboBoxItem>
                                            <ComboBoxItem>3</ComboBoxItem>
                                            <ComboBoxItem>4</ComboBoxItem>
                                            <ComboBoxItem>5</ComboBoxItem>
                                        </ComboBox>
                                    </Grid>
                                </Expander.Header>
                                <ui:ListView ItemsSource="{Binding SelectedWeapon.Passives}" IsSelectionEnabled="False" Padding="0" ItemContainerStyle="{StaticResource DefaultListBoxItemStyle}">
                                    <ui:ListView.ItemTemplate>
                                        <DataTemplate>
                                            <StackPanel>
                                                <Separator Margin="0,0,0,8"/>
                                                <Expander HorizontalAlignment="Stretch">
                                                    <Expander.Header>
                                                        <CheckBox HorizontalContentAlignment="Stretch" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" IsChecked="{Binding IsTriggered,Mode=TwoWay}" Style="{StaticResource PassiveCheckBoxStyle}">
                                                            <TextBlock Margin="4,0,0,0" Text="{Binding DescriptionByRefineLevel}" VerticalAlignment="Center" HorizontalAlignment="Stretch" Style="{StaticResource BodyTextBlockStyle}" TextWrapping="Wrap"/>
                                                        </CheckBox>
                                                    </Expander.Header>
                                                    <Grid>
                                                        <CheckBox HorizontalAlignment="Left" ui:ControlHelper.Header="{Binding ConditionText,TargetNullValue={StaticResource ConditionNullValue}}" IsChecked="{Binding IsSatisfied}"/>
                                                        <ComboBox HorizontalAlignment="Right" ui:ControlHelper.Header="被动层数" ItemsSource="{Binding Stacks}" SelectedItem="{Binding CurrentStack,Mode=TwoWay}"/>
                                                    </Grid>
                                                </Expander>
                                            </StackPanel>
                                        </DataTemplate>
                                    </ui:ListView.ItemTemplate>
                                </ui:ListView>
                            </Expander>
                        </ui:ThemeShadowChrome>
                        <ui:ThemeShadowChrome Margin="16">
                            <Expander Header="其他BUFF与参数" Padding="8" Background="{DynamicResource SystemControlBackgroundAltHighBrush}">
                                <ui:ListView IsSelectionEnabled="False" Padding="0" ItemContainerStyle="{StaticResource DefaultListBoxItemStyle}">
                                    <StackPanel>
                                        <Separator Margin="0,0,0,8"/>
                                        <Grid>
                                            <TextBlock VerticalAlignment="Center" Text="剧变反应基础伤害"/>
                                            <TextBox HorizontalAlignment="Right" MinWidth="105"></TextBox>
                                        </Grid>
                                    </StackPanel>
                                </ui:ListView>
                            </Expander>
                        </ui:ThemeShadowChrome>
                    </StackPanel>
                </ui:ScrollViewerEx>
            </Grid>
            <Button Grid.Row="2" Content="计算" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="16,4,16,12"/>
        </Grid>

    </Grid>
</Page>
